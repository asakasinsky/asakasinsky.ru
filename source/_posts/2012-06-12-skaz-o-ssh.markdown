---
layout: post
title: "Сказ о том, как на сервера по SSH ходить"
date: 2012-06-12 02:50
comments: true
categories: 
- памятка
tags:
- "разработка"
- "Best practice"
description: "В статье рассказывается о том, как настроить SSH для доступа на сервер и чем это хорошо. "
---
Пом­ню, как-то в&nbsp;столь­ном Москва-гра­де я&nbsp;и&nbsp;Алё­ха, сын по­па со­бор­но­го, за­шли в&nbsp;трак­тир за­мор­ский с&nbsp;чуд­ны́м на­зва­ни­ем на&nbsp;м.&nbsp;Яст­ва и&nbsp;на­пит­ки при­шлось са­мим нести, юро­ди­вые лишь пла­ту взи­ма­ют, за­мор­щи­на, од­ним сло­вом. Си­дим, обе­да­ем, в&nbsp;но­ут­бу­ки пя­лим­ся, ка­нал Wi-Fi был дю­же бес­пла­тен и&nbsp;быстр. Алё­ха все ржал, ро­няя крош­ки на&nbsp;бо­ро­ду и&nbsp;при­го­ва­ри­вал:  
—&nbsp;Пи­сарь&nbsp;— адской диа­вол!  
Оно и&nbsp;по­нят­но, Алё­ха-то на&nbsp;ле­пи­лу сай­тов учил­ся, и&nbsp;во­пре­ки вто­рой за­по­ве­ди не&nbsp;де­лать се­бе ку­ми­ра, со­тво­рил его се­бе-та­ки из&nbsp;од­но­го дво­ря­ни­на мос­ков­ско­го по&nbsp;име­ни Ар­те­мий. Ар­те­мий на&nbsp;сво­ей стра­ни­це ле­по гла­го­лил о&nbsp;без­ру­ких и&nbsp;без­гла­зых сай­то­де­лах. Бы­ва­ло, пи­шет та­кой сай­то­дел, мол, Ар­те­мий, ба­тюш­ка, зе­ло че­лом бью, рас­ска­жи, по­ве­дай, что не&nbsp;так я&nbsp;нера­зум­ный со­тво­рил на&nbsp;этой стра­ни­це. А&nbsp;Ар­те­мий, про­стым ро­счер­ком ему в&nbsp;от­вет, гов­но, мол это все, и&nbsp;ве­се­ло так мо­ти­ви­ру­ет. Алё­ха, зна­чит ржал, а&nbsp;мне зе­ло скуч­но ста­ло, и&nbsp;ре­шил я&nbsp;то­гда про­ве­рить ка­нал вай­фай­ный. От­крыл кис­ме́туш­ку и&nbsp;по­нес­лось... 
<!--more-->
Да&nbsp;вру, ко­неч­но )))  
На&nbsp;са­мом де­ле всё бы­ло не&nbsp;так. Мы&nbsp;с&nbsp;од­ним мо­им зна­ко­мым ре­ши­ли про­ве­сти аудит Wi-Fi се­ти в&nbsp;од­ном из&nbsp;«Мак­даков». За&nbsp;то&nbsp;вре­мя, что мы&nbsp;си­де­ли и&nbsp;ели, к&nbsp;мо­е­му удив­ле­нию, пой­ма­ли две па­ры ло­гин:па­роль от&nbsp;FTP. Я&nbsp;огля­дел­ся во­круг, вро­де обыч­ные по­се­ти­те­ли, ни­че­го в&nbsp;них не&nbsp;вы­да­ва­ло лю­дей, адми­ня­щих сай­ты. Но... Ре­зуль­тат на&nbsp;ли­цо, как го­во­рить­ся.  
<code>В хо­де экс­пе­ри­мен­та ни один сайт не по­стра­дал.</code>

{% pullquote %}
Это&nbsp;я&nbsp;к&nbsp;че­му? А&nbsp;к&nbsp;то­му, что небез­опас­но хо­дить на&nbsp;сер­ве­ра по&nbsp;FTP или Telnet. Все ва­ши дан­ные вид­ны за­ин­те­ре­со­ван­ным ли­цам со&nbsp;все­ми вы­те­ка­ю­ще­ми по­след­стви­я­ми. Вы­ход про­стой, поль­зо­вать­ся {"SSH (англ. Secure SHell&nbsp;— «без­опас­ная обо­лоч­ка»)"}. SSH шиф­ру­ет весь тра­фик и&nbsp;па­ро­ли впри­да­чу. В&nbsp;на­ше вре­мя есть на&nbsp;лю­бом хо­стин­ге, и&nbsp;в&nbsp;90&nbsp;про­цен­тах слу­ча­ев за&nbsp;его ис­поль­зо­ва­ние не&nbsp;бе­рут де­нег.В об­щем, пра­виль­ные па­ца­ны ис­поль­зу­ют SSH.
{% endpullquote %}

### Все действие происходит в Ubuntu 

Генерируем rsa-ключи.
{% codeblock %}
ssh-keygen -t rsa 
{% endcodeblock %}

В&nbsp;ре­зуль­та­те бу­дет ге­не­ра­ция пуб­лич­но­го и&nbsp;пер­со­наль­но­го клю­чей. Они бу­дут на­хо­дить­ся в&nbsp;пап­ке <code>~/.ssh</code>. До­ба­вим rsa-ключ аген­ту аутен­ти­фи­ка­ции ssh-agent.
{% codeblock %}
ssh-add ~/.ssh/id_rsa
{% endcodeblock %}

Со­об­ща­ем сер­ве­ру наш пуб­лич­ный ключ (по­тре­бу­ет­ся ввод па­ро­ля).
{% codeblock %}
ssh-copy-id user@server # user - имя пользователя (логин), 
                        # и server - либо IP сервера, либо доменное имя 
{% endcodeblock %}

Входим по SSH (ура, без пароля!!!). 
{% codeblock %}
ssh user@server         # user - имя пользователя (логин), 
                        # и server - либо IP сервера, либо доменное имя 
{% endcodeblock %}

Как видим, не так это и сложно. 
